<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Wei Liu &lt;wei.liu2@citrix.com&gt;" />
  <title>Xen Release Management</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
</head>
<body>
<header>
<h1 class="title">Xen Release Management</h1>
<p class="author">Wei Liu &lt;<a href="mailto:wei.liu2@citrix.com">wei.liu2@citrix.com</a>&gt;</p>
<p class="date">Revision 1</p>
</header>
<nav id="TOC">
<ul>
<li><a href="#motivation"><span class="toc-section-number">1</span> Motivation</a></li>
<li><a href="#xen-release-cycle"><span class="toc-section-number">2</span> Xen release cycle</a></li>
<li><a href="#the-different-roles-in-a-xen-release"><span class="toc-section-number">3</span> The different roles in a Xen release</a><ul>
<li><a href="#release-manager"><span class="toc-section-number">3.1</span> Release Manager</a></li>
<li><a href="#maintainers"><span class="toc-section-number">3.2</span> Maintainers</a></li>
<li><a href="#committers"><span class="toc-section-number">3.3</span> Committers</a></li>
<li><a href="#contributors"><span class="toc-section-number">3.4</span> Contributors</a></li>
<li><a href="#the-security-team"><span class="toc-section-number">3.5</span> The Security Team</a></li>
<li><a href="#the-release-technician"><span class="toc-section-number">3.6</span> The Release Technician</a></li>
<li><a href="#the-community-manager"><span class="toc-section-number">3.7</span> The Community Manager</a></li>
<li><a href="#the-pr-personnel"><span class="toc-section-number">3.8</span> The PR Personnel</a></li>
</ul></li>
<li><a href="#what-happens-during-a-release"><span class="toc-section-number">4</span> What happens during a release</a><ul>
<li><a href="#development-period"><span class="toc-section-number">4.1</span> Development period</a></li>
<li><a href="#freeze-period"><span class="toc-section-number">4.2</span> Freeze period</a></li>
<li><a href="#hand-over-of-release-manager-responsibility"><span class="toc-section-number">4.3</span> Hand over of Release Manager responsibility</a></li>
</ul></li>
<li><a href="#email-templates-and-scripts"><span class="toc-section-number">5</span> Email templates and scripts</a><ul>
<li><a href="#rc-emails"><span class="toc-section-number">5.1</span> RC emails</a></li>
<li><a href="#forego-control-of-the-tree"><span class="toc-section-number">5.2</span> Forego control of the tree</a></li>
<li><a href="#commit-moratorium"><span class="toc-section-number">5.3</span> Commit moratorium</a></li>
<li><a href="#lift-commit-moratorium"><span class="toc-section-number">5.4</span> Lift commit moratorium</a></li>
<li><a href="#reminder-of-last-posting-date"><span class="toc-section-number">5.5</span> Reminder of last posting date</a></li>
<li><a href="#reminder-of-cut-off-date"><span class="toc-section-number">5.6</span> Reminder of cut-off date</a></li>
<li><a href="#release-announcement"><span class="toc-section-number">5.7</span> Release announcement</a></li>
<li><a href="#script-to-generate-months-update-emails"><span class="toc-section-number">5.8</span> Script to generate months update emails</a></li>
</ul></li>
</ul>
</nav>
<h1 id="motivation"><span class="header-section-number">1</span> Motivation</h1>
<p>Over the years we have had different people signing up as the Release Manager of Xen. It would be rather wasteful if every new Release Manager has to go over everything and tripped over by the same mistakes again and again.</p>
<p>This file intends to document the process of managing a Xen release. It is mainly written for Release Manager, but other roles (contributors, maintainers and committers) are also encouraged to read this document, so that they can have an idea what to expect from the Release Manager.</p>
<h1 id="xen-release-cycle"><span class="header-section-number">2</span> Xen release cycle</h1>
<p>The Xen hypervisor project now releases twice a year, at the beginning of June and the beginning of December. The actual release date depends on a lot of factors.</p>
<p>We can roughly divide one release into two periods. The development period and the freeze period. The former is 4 months long and the latter is about 2 months long.</p>
<p>During development period, contributors submit patches to be reviewed and committed into xen.git. All feature patches must be committed before a date, which is normally called the “cut-off date”, after which the freeze period starts. There will be a date before which all patches that wish to be merged for the release should be posted – it is normally called the “last posting date” and it is normally two weeks before the “cut-off date”.</p>
<p>During freeze period, the tree is closed for new features. Only bug fixes are accepted. This period can be shorter or longer than 2 months. If it ends up longer than 2 months, it eats into the next development period.</p>
<p>Here is a conjured up example (use <code>cal 2017</code> to get an idea):</p>
<ul>
<li>Development period: 2017 June 11 - 2017 September 29
<ul>
<li>the “cut-off date” is 2017 September 29</li>
<li>the “last posting date” is 2017 September 15</li>
</ul></li>
<li>Freeze period: 2017 October 2 - 2017 December 7
<ul>
<li>the anticipated release date is 2017 December 7</li>
</ul></li>
</ul>
<h1 id="the-different-roles-in-a-xen-release"><span class="header-section-number">3</span> The different roles in a Xen release</h1>
<h2 id="release-manager"><span class="header-section-number">3.1</span> Release Manager</h2>
<p>A trusted developer in the community that owns the release process. The major goal of the Release Manager is to make sure a Xen release has high quality and doesn’t slip too much.</p>
<p>The Release Manager will not see much workload during development period, but expects to see increasing workload during the freeze period until the final release. He or she is expected to keep track of issues, arrange RCs, negotiate with relevant stakeholders, balance the need from various parties and make difficult decisions when necessary.</p>
<p>The Release Manager essentially owns xen-unstable branch during the freeze period. The Committers will act on the wishes of the Release Manager during that time.</p>
<h2 id="maintainers"><span class="header-section-number">3.2</span> Maintainers</h2>
<p>A group of trusted developers who are responsible for certain components in xen.git. They are expected to respond to patches / questions with regard to their components in a timely manner, especially during the freeze period.</p>
<h2 id="committers"><span class="header-section-number">3.3</span> Committers</h2>
<p>A group of trusted maintainers who can commit to xen.git. During the development window they normally push things as they see fit. During the freeze period they transfer xen-unstable branch ownership and act on the wishes of the Release Manager. That normally means they need to have an Release Ack in order to push a patch.</p>
<h2 id="contributors"><span class="header-section-number">3.4</span> Contributors</h2>
<p>Contributors are also expected to respond quickly to any issues regarding the code they submitted during development period. Failing that, the Release Manager might decide to revert the changes, declare feature unsupported or take any action he / she deems appropriate.</p>
<h2 id="the-security-team"><span class="header-section-number">3.5</span> The Security Team</h2>
<p>The Security Team operates independently. The visibility might be rather limited due to the sensitive nature of security work. The best action the Release Manager can take is to set aside some time for potential security issues to be fixed.</p>
<h2 id="the-release-technician"><span class="header-section-number">3.6</span> The Release Technician</h2>
<p>The Release Technician is the person who tags various trees, prepares tarball etc. He or she acts on the wishes of the Release Manager. Please make sure the communication is as clear as it can be.</p>
<h2 id="the-community-manager"><span class="header-section-number">3.7</span> The Community Manager</h2>
<p>The Community Manager owns xenproject.org infrastructure. He or she is responsible for updating various web archives, updating wiki pages and coordinating with the PR Personnel.</p>
<h2 id="the-pr-personnel"><span class="header-section-number">3.8</span> The PR Personnel</h2>
<p>They are responsible for coordinating with external reporters to publish Xen release announcement. The Release Manager should be absolutely sure the release is going out on a particular date before giving them the signal to proceed, because there is a point of no return once they schedule a date with external reporters.</p>
<h1 id="what-happens-during-a-release"><span class="header-section-number">4</span> What happens during a release</h1>
<h2 id="development-period"><span class="header-section-number">4.1</span> Development period</h2>
<p>Send out monthly update email. The email contains the timeline of the release, the major work items and any other information the Release Manager sees fit. Reminders should also be sent one week before important dates (see above, “last posting date” and “cut-off date”). Please consider adding relevant events to your calendar.</p>
<p>Occasionally check the status of the xen-unstable branch, make sure it gets timely pushes to master.</p>
<h2 id="freeze-period"><span class="header-section-number">4.2</span> Freeze period</h2>
<p>Before or at very early stage of the freeze period, agree with the Community Manager a schedule for RC test days.</p>
<p>Once the freeze starts, the ownership of xen-unstable branch automatically transfers to the Release Manager. The Release Manager can say “not releasing now” because of too many bugs, “until someone fixes these”, or “no more patches until X, Y, and Z happen”.</p>
<p>Here is a list of things to do for making RCs:</p>
<ol type="1">
<li><p>Check the status of the tree. Ask the Release Technician to make an RC if the tree is good.</p></li>
<li><p>Send an email to xen-devel, xen-users and xen-announce to announce the RC.</p></li>
<li><p>Branch and / or reopen the tree for further feature submission if appropriate.</p></li>
<li><p>Collect and track any issues reported, determine their severity, prod relevant developers and maintainers to fix the issues.</p></li>
<li><p>When patches to fix issues are posted, determine if the patches are good to be included.</p></li>
<li><p>Go back to 1.</p></li>
</ol>
<p>It is normally OK in the early RCs that you hand back xen-unstable branch to committers so that they can commit bug fixes at will. As we approach late RCs, the standard for accepting a patch will get higher and higher. Please communicate clearly when committers can commit at will and when formal Release Ack is needed.</p>
<p>At the same time, work with the Community Manager, PR Personnel and Contributors to gather a list of features for the release. Discuss the support status of new features with stakeholders. Help prepare the press release, write a blog post for the release.</p>
<ol type="1">
<li><p>Collate a list of major changes: this should be done in collaboration between Release Manager, PR Personnel and key contributors. This should <em>not</em> be done on a public mailing list, to minimize the risk of release related media stories being published before the release date.</p></li>
<li><p>PR Personnel will identify feature highlights, a theme for the press release, companies providing supporting quotes for the press release and media outlets we would want to reach out to and will manage the creation of the press release in private.</p></li>
<li><p>The Community Manager will also draft blog post with the help of PR Personnel and Release Manager, which will be published under the name of the Release Manager.</p></li>
<li><p>The Community Manager will create release related documentation such as Acknowledgements, Feature List, Man Pages and Release Notes on the wiki accessible via a release category. This can be done in public.</p></li>
<li><p>PR Personnel will get stake-holder and Advisory Board approval for the press release (1-2 weeks before the release).</p></li>
</ol>
<p>When you think all pending issues are fixed and Xen is ready to be released from the last RC:</p>
<ol type="1">
<li><p>Send out commit moratorium emails to committers@.</p></li>
<li><p>Check all the trees (mini-os, qemu-trad, qemu-xen, seabios, ovmf etc). They have the correct commits and all security patches applied. There will be tools provided.</p></li>
<li><p>Negotiate release date options with PR personnel. Typically we need 3-4 days to line up press briefings with reporters under embargo. PR personnel will also need to consider industry events to ensure that PR is effective. PR releases typically done mid-week (Tuesday - Thursday).</p></li>
<li><p>Select the release date.</p></li>
<li><p>Check with relevant stake-holders (typically community manager) whether wiki documentation and PR is in good shape (for an example see https://wiki.xenproject.org/wiki/Category:Xen_4.9 <a href="https://wiki.xenproject.org/wiki/Category:Xen_4.9" class="uri">https://wiki.xenproject.org/wiki/Category:Xen_4.9</a>)</p></li>
<li><p>Obtain a formal go-ahead from</p>
<ul>
<li>the Community Manager</li>
<li>the Release Technician</li>
</ul>
<p>Ask them to dry-run their checklist and confirm everything is OK. If not, arrange another RC and restart this checklist.</p></li>
<li><p>Do not commit to a release date until</p>
<ul>
<li>The exact xen.git commit id to be released is known.</li>
<li>That commit id has been satisfactorily tested.</li>
</ul></li>
<li><p>Give PR Personnel final go-ahead, and instruct Release Technician to make release deliverables (tags and tarballs - will usually be in place the day before the release). At this point, PR collateral will be sent to reporters (typically 2-3 working days before the release date) and we cannot undo publications without questions being asked and risk of negative PR. It is acceptable to make a xen-devel@ announcement <em>before</em> the PR release date (blog, xen-announce@, press release).</p></li>
<li><p>Make the announcement on various mailing list, publish the blog post.</p></li>
</ol>
<p>Allow for contingencies. It is not uncommon that some last minute (security or not) bugs are discovered. To provide a fix takes time, the test of the fix will also take time. Allow for at least 1 week from getting a fix to getting a push. For security bugs, coordinate with the Security Team to adjust the dates according to our security policy.</p>
<h2 id="hand-over-of-release-manager-responsibility"><span class="header-section-number">4.3</span> Hand over of Release Manager responsibility</h2>
<p>If there is a new Release Manager for the next release, make sure the following things happen for the new Release Manager.</p>
<ol type="1">
<li>A JIRA (xenproject.atlassian.net) is created and proper permissions granted.</li>
<li>Access to community test infrastructure is granted.</li>
<li>Access to mailing list moderation panel is granted.</li>
<li>An account for blog.xenproject.org is created.</li>
<li>An account for wiki.xenproject.org is created.</li>
</ol>
<h1 id="email-templates-and-scripts"><span class="header-section-number">5</span> Email templates and scripts</h1>
<p>Note: if you want specific actions from committers, please make sure you CC committers@.</p>
<h2 id="rc-emails"><span class="header-section-number">5.1</span> RC emails</h2>
<pre><code>Subject: Xen X.Y rcZ

Hi all,

Xen X.Y rcZ is tagged. You can check that out from xen.git:

git://xenbits.xen.org/xen.git X.Y.0-rcZ

For your convenience there is also a tarball at:
https://downloads.xenproject.org/release/xen/X.Y.0-rcZ/xen-X.Y.0-rcZ.tar.gz

And the signature is at:
https://downloads.xenproject.org/release/xen/X.Y.0-rcZ/xen-X.Y.0-rcZ.tar.gz.sig

Please send bug reports and test reports to xen-devel@lists.xenproject.org.
When sending bug reports, please CC relevant maintainers and me
(abc@xyz.com).

As a reminder, there will be another Xen Test Day.

See instructions on: URL_TO_TEST_INSTRUCTIONS</code></pre>
<h2 id="forego-control-of-the-tree"><span class="header-section-number">5.2</span> Forego control of the tree</h2>
<pre><code>Subject: No Release Ack needed before RcX

Committers,

The tree is in good state. No release ack is needed before RcX. Please commit
bug fixes at will.

$RM</code></pre>
<h2 id="commit-moratorium"><span class="header-section-number">5.3</span> Commit moratorium</h2>
<pre><code>Subject: Commit moratorium for $REASON

Committers,

Please don&#39;t push any new patch to staging because $REASON.

Another email will be sent once the moratorium is lifted.

$RM</code></pre>
<h2 id="lift-commit-moratorium"><span class="header-section-number">5.4</span> Lift commit moratorium</h2>
<pre><code>Subject: Commit moratorium is lifted for $REASON

Committers,

The commit moratorium is lifted, please commit patches that are already
Release-acked.

$RM</code></pre>
<h2 id="reminder-of-last-posting-date"><span class="header-section-number">5.5</span> Reminder of last posting date</h2>
<pre><code>Subject: Last posting date for Xen X.Y is $DATE

Hi all,

The last posting date for Xen X.Y is $DATE. If you want your features to be
included for the release, please make sure they are posted for the first
time before $DATE.

$RM</code></pre>
<h2 id="reminder-of-cut-off-date"><span class="header-section-number">5.6</span> Reminder of cut-off date</h2>
<pre><code>Subject: Cut-off date for Xen X.Y is $DATE

Hi all,

The cut-off date for Xen X.Y is $DATE. If you want your features to be
included for the release, please make sure they are committed by $DATE.

$RM</code></pre>
<h2 id="release-announcement"><span class="header-section-number">5.7</span> Release announcement</h2>
<pre><code> Subject: [ANNOUNCEMENT] Xen X.Y is released

 Dear community members,

 I&#39;m pleased to announce that Xen X.Y.0 is released.

 Please find the tarball and its signature at:

 https://xenproject.org/downloads/xen-archives/xen-project-xy-series/xen-project-xy0.html

 You can also check out the tag in xen.git:

   https://xenbits.xen.org/git-http/xen.git RELEASE-X.Y.0

 Git checkout and build instructions can be found at:

 https://wiki.xenproject.org/wiki/Xen_Project_X.Y_Release_Notes#Build_Requirements

 Release notes can be found at:

   https://wiki.xenproject.org/wiki/Xen_Project_X.Y_Release_Notes

 A summary for X.Y release documents can be found at:

   https://wiki.xenproject.org/wiki/Category:Xen_X.Y

 Technical blog post for X.Y can be found at:

  URL_TO_BLOG

 Thanks everyone who contributed to this release. This release would
 not have happened without all the awesome contributions from around
 the globe.

 Regards,

 $RM (on behalf of the Xen Project Hypervisor team)</code></pre>
<h2 id="script-to-generate-months-update-emails"><span class="header-section-number">5.8</span> Script to generate months update emails</h2>
<pre><code>#!/bin/bash
# Use ssmtp for simplicity
# ./status-release.sh | formail -f -s /usr/sbin/ssmtp -bm -t

FILE=`mktemp`
cat &lt;&lt; EOF &gt; $FILE

== Hypervisor ==

S: Per-cpu tasklet
O: Konrad Rzeszutek Wilk
E: konrad.wilk@oracle.com
J: XEN-28

=== x86 ===

=== ARM ===

== Completed ==

S:
EOF


AWK_FILE=`mktemp`
cat &lt;&lt; EOF &gt; $AWK_FILE
BEGIN { s2_count = 1;score = &quot;&quot;; emails=1; first_time = 1; subject=&quot;&quot;}
/== /  {
    if ( subject != &quot;&quot; )  {
        if (score != &quot;&quot;)
            print &quot;* &quot;, subject,  &quot;(&quot;score&quot;)&quot;
        else if (version != &quot;&quot;)
            print &quot;* &quot;, subject, &quot;(&quot;version&quot;)&quot;;
        else
            print &quot;* &quot;, subject;
        for (i = 1; i &lt;= s2_count; i++) {
            if (i in s2)
                print &quot; &quot;,s2[i];
        }
        if (bug != &quot;&quot;)
            print &quot;  Link: https://bugs.xenproject.org/xen/bug/&quot;bug
        if (jira != &quot;&quot;)
            print &quot;  -  &quot;jira
        for (i = 1; i &lt;= count; i++) {
            if (i in o)
                print &quot;  -&quot;, o[i]
        }
        if (emails)
            print &quot;&quot;
        first_time = 1;
        subject=&quot;&quot;
        email=&quot;&quot;
        score=&quot;&quot;
        bug=&quot;&quot;
        jira=&quot;&quot;
        version=&quot;&quot;
        count = 1;
        s2_count = 1;
        delete s;
        delete s2;
        delete o;
        delete e;
    }
    print \$0,&quot;\n&quot;
    }
/;/ { };
/S:/    {
    if ( !first_time )  {
        if (score != &quot;&quot;)
            print &quot;* &quot;, subject,  &quot;(&quot;score&quot;)&quot;
        else if (version != &quot;&quot;)
            print &quot;* &quot;, subject, &quot;(&quot;version&quot;)&quot;;
        else
            print &quot;* &quot;, subject
        for (i = 1; i &lt;= s2_count; i++) {
            if (i in s2)
                print &quot; &quot;,s2[i];
        }
        if (bug != &quot;&quot;)
            print &quot;  Link: https://bug.xenproject.org/xen/bug/&quot;bug
        if (jira != &quot;&quot;)
            print &quot;  -  &quot;jira
        for (i = 1; i &lt;= count; i++) {
            if (i in o)
                print &quot;  -&quot;, o[i]
        }
        if (emails)
            print &quot;&quot;
    }
    first_time = 0;
    sub(\$1, &quot;&quot;);
    sub(/^[ \t]+/, &quot;&quot;);
    subject=\$0;
    email=&quot;&quot;
    bug=&quot;&quot;
    jira=&quot;&quot;
    count = 1;
    s2_count = 1;
    delete s;
    delete s2;
    delete o;
    delete e;
    score=&quot;&quot;;
    version=&quot;&quot;;
    }
/O:/    { sub(\$1, &quot;&quot;); o[count++]=\$0; };
/S2:/   { sub(\$1, &quot;&quot;); s2[s2_count++]=\$0;};
/E:/    { sub(\$1, &quot;&quot;); sub(/^[ \t]+/, &quot;&quot;); email=\$0; e[emails++]=\$0;};
/P:/    { sub(\$1, &quot;&quot;); sub(/^[ \t]+/, &quot;&quot;); score=\$0; };
/B:/    { sub(\$1, &quot;&quot;); sub(/^[ \t]+/, &quot;&quot;); bug=\$0; };
/J:/    { sub(\$1, &quot;&quot;); sub(/^[ \t]+/, &quot;&quot;); jira=\$0; };
/V:/    { sub(\$1, &quot;&quot;); sub(/^[ \t]+/, &quot;&quot;); version=\$0; };
END {
    }
// {  }
EOF
AWK_FILE_EMAIL=`mktemp`
cat &lt;&lt; EOF &gt; $AWK_FILE_EMAIL
BEGIN { emails=1;}
/E:/    {
    sub(\$1, &quot;&quot;); sub(/^[ \t]+/, &quot;&quot;);
    email=\$0;
    for ( i = 1; i &lt;= emails; i++ ) {
        if (i in e) {
            if (e[i] == email) {
                email=&quot;&quot;;
                break;
            }
        }
    }
    if (email != &quot;&quot;)
        e[emails++]=email;
}
END {
    printf &quot;Bcc: &quot;
    for ( i = 1; i &lt;= emails; i++ )
        if (i in e) {
            if (i == emails - 1)
                printf &quot;&lt;%s&gt;&quot;, e[i];
            else
                printf &quot;&lt;%s&gt;,&quot;, e[i];
        }
    print &quot;&quot;
    }
// {  }
EOF

echo &quot;From: $RELEASE_MANAGER_NAME &lt;$RELEASE_MANAGER_MAIL&gt;&quot;
echo &quot;To: xen-devel@lists.xenproject.org&quot;
echo &quot;Cc: $RELEASE_MANAGER_MAIL&quot;
cat $FILE | awk -f $AWK_FILE_EMAIL
rm $AWK_FILE_EMAIL

echo &quot;Subject: Xen $RELEASE_VERSION Development Update&quot;
PRE=`mktemp`
cat &lt;&lt; EOF &gt; $PRE

This email only tracks big items for xen.git tree. Please reply for items you
would like to see in $RELEASE_VERSION so that people have an idea what is going on and
prioritise accordingly.

You&#39;re welcome to provide description and use cases of the feature you&#39;re
working on.

= Timeline =

We now adopt a fixed cut-off date scheme. We will release twice a
year. The upcoming $RELEASE_VERSION timeline are as followed:

* Last posting date: $RELEASE_CUTOFF
* Hard code freeze: $RELEASE_FREEZE
* RC1: TBD
* Release: $RELEASE_DATE

Note that we don&#39;t have freeze exception scheme anymore. All patches
that wish to go into $RELEASE_VERSION must be posted no later than the last posting
date. All patches posted after that date will be automatically queued
into next release.

RCs will be arranged immediately after freeze.

We recently introduced a jira instance to track all the tasks (not only big)
for the project. See: https://xenproject.atlassian.net/projects/XEN/issues.

Most of the tasks tracked by this e-mail also have a corresponding jira task
referred by XEN-N.

I have started to include the version number of series associated to each
feature. Can each owner send an update on the version number if the series
was posted upstream?

= Projects =

EOF

POST=`mktemp`
cat &lt;&lt;EOF &gt; $POST

EOF

# Preamble
cat $PRE
rm $PRE
# Body
cat $FILE | awk -f $AWK_FILE
rm $AWK_FILE
rm $FILE
cat $POST
rm $POST</code></pre>
</body>
</html>
